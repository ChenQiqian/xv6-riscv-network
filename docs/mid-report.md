# 中期报告

xv6-riscv 网络增强组

## 背景与调研

xv6 提供了（事实上是 QEMU 模拟了）一个虚拟的 E1000 网卡，并提供了连接。xv6 （guest）的 ip 地址为 10.0.2.15 ，宿主机（host）为 10.2.2.2. 。我们将要编写 E1000 网卡的驱动程序，以及对应的上层，让我们的 xv6 操作系统能够连上信息高速路。

Linux 有一套成熟的网络栈。Linux内核网络栈的任务，就是在传输层、网络层、链路层之间进行数据的传输和处理，而并不涉及会话层、表示层、应用层（这些任务由用户空间的应用程序完成）与物理层（交给网卡设备去处理）。向下，Linux 的网络栈和网卡互动，读取链路层的数据包；向上，Linux 的网络栈提供了 Netlink 接口，将套接字统一包装为 API 接口。

## 开发目标

我们打算以 Linux 系统为蓝本，实现基本的操作系统网络栈。

+ 实现 E1000 网卡驱动，并实现为抽象的网络设备
+ 实现 ARP 协议
+ 实现 IPv4 协议，ICMPv4协议
+ 实现 UDP 协议和基本的 TCP 协议
+ 实现内核的套接字系统调用，以及用户模式的套接字接口
+ 实现用户模式下的 ping 命令、ifconfig命令

## 分工



## 时间表

第 10 周：环境配置、学习
第 11 周：实现网卡驱动和抽象网络设备
第 12 周：实现 IP、UDP 和 TCP 协议
第 13 周：实现用户接口、用户网络相关命令

## 参考文献

[xv6 Lab: networking](https://pdos.csail.mit.edu/6.828/2021/labs/net.html)

[精通Linux内核(Linux Kernel Networking: Implementation and Theory)]()